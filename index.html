<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study Music Library</title>
  <!-- Prevent aggressive caching while you iterate -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- Main stylesheet (no Tailwind needed) -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header>
    <div class="container">
      <h1>Study Music Library</h1>
      <button id="darkToggle" class="icon-btn" title="Toggle dark mode">ðŸŒ™</button>
    </div>
  </header>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main class="container">
    <!-- Subject filter buttons will render here -->
    <div id="filters"></div>

    <!-- Track cards grid -->
    <div id="tracks"></div>
  </main>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FOOTER / PLAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <footer>
    <div class="container">
      <audio id="player" controls></audio>
      <label>
        Speed
        <select id="speedSelect">
          <option value="0.75">0.75Ã—</option>
          <option value="1" selected>1Ã—</option>
          <option value="1.25">1.25Ã—</option>
          <option value="1.5">1.5Ã—</option>
        </select>
      </label>
    </div>
  </footer>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOGIC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script>
    /* -------- Darkâ€‘mode toggle -------- */
    const darkToggle = document.getElementById('darkToggle');
    darkToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    });
    if (localStorage.theme === 'dark') document.documentElement.classList.add('dark');

    /* -------- Player speed -------- */
    const player = document.getElementById('player');
    document.getElementById('speedSelect').addEventListener('change', e => {
      player.playbackRate = parseFloat(e.target.value);
    });

    /* -------- Track catalogue -------- */
    const tracks = [
      {
        title: "Math Focus Beats",
        subject: "Maths",
        url: "focus-beats.mp3"  // put file in repo root or /audio/
      },
      {
        title: "English Lockâ€‘In",
        subject: "English",
        url: "SUPER FOCUS [ Flow State Music ] Binaural Beats 40Hz â˜… Ambient Study Music to Concentrate (mp3cut.net).mp3"
      }
      // Add more tracks here as needed
    ];

    /* -------- Render helpers -------- */
    function render() {
      buildFilters();
      showSubject();
    }

    function buildFilters() {
      const filtersEl = document.getElementById('filters');
      filtersEl.innerHTML = '';

      // "All" button first
      const allBtn = document.createElement('button');
      allBtn.textContent = 'All';
      allBtn.className = 'filter-btn active';
      allBtn.addEventListener('click', () => {
        setActiveFilter(allBtn);
        showSubject();
      });
      filtersEl.appendChild(allBtn);

      // Unique subject buttons
      const subjects = [...new Set(tracks.map(t => t.subject))];
      subjects.forEach(sub => {
        const btn = document.createElement('button');
        btn.textContent = sub;
        btn.className = 'filter-btn';
        btn.addEventListener('click', () => {
          setActiveFilter(btn);
          showSubject(sub);
        });
        filtersEl.appendChild(btn);
      });
    }

    function setActiveFilter(selectedBtn) {
      document.querySelectorAll('#filters .filter-btn').forEach(btn => btn.classList.remove('active'));
      selectedBtn.classList.add('active');
    }

    function showSubject(filter) {
      const tracksEl = document.getElementById('tracks');
      tracksEl.innerHTML = '';

      tracks
        .filter(t => !filter || t.subject === filter)
        .forEach(track => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <h3 class="card-title">${track.title}</h3>
            <p class="card-sub">${track.subject}</p>
            <button class="play-btn">Play</button>
          `;
          card.querySelector('button').addEventListener('click', () => {
            player.src = track.url;
            player.play();
          });
          tracksEl.appendChild(card);
        });
    }

    render();
  </script>
</body>
</html>
