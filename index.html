<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study Music Library</title>
  <!-- Prevent aggressive caching while you iterate -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <link rel="stylesheet" href="style.css" />
  <!-- Local style tweak for loop button so we don't touch style.css again -->
  <style>
    #loopToggle{
      display:flex;align-items:center;justify-content:center;
      width:2.25rem;height:2.25rem;
      border:1px solid var(--clr-border);
      background:transparent;
      color:var(--clr-text);
      border-radius:var(--radius);
      cursor:pointer;
      transition:var(--transition);
    }
    #loopToggle:hover,
    #loopToggle.active{background:var(--clr-primary);color:#fff}
  </style>
</head>
<body>
  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <header>
    <div class="container">
      <h1>Study Music Library</h1>
      <button id="darkToggle" class="icon-btn" title="Toggle dark mode">üåô</button>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main class="container">
    <div id="filters"></div>
    <div id="tracks"></div>
  </main>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FOOTER / PLAYER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <footer>
    <div class="container">
      <button id="loopToggle" title="Toggle loop">üîÅ</button>
      <audio id="player" controls></audio>
      <label>
        Speed
        <select id="speedSelect">
          <option value="0.75">0.75√ó</option>
          <option value="1" selected>1√ó</option>
          <option value="1.25">1.25√ó</option>
          <option value="1.5">1.5√ó</option>
        </select>
      </label>
    </div>
  </footer>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ LOGIC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <script>
    /* -------- Dark‚Äëmode toggle -------- */
    const darkToggle = document.getElementById('darkToggle');
    darkToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    });
    if (localStorage.theme === 'dark') document.documentElement.classList.add('dark');

    /* -------- Player + controls -------- */
    const player = document.getElementById('player');

    // playback speed
    document.getElementById('speedSelect').addEventListener('change', e => {
      player.playbackRate = parseFloat(e.target.value);
    });

    // loop toggle
    const loopBtn = document.getElementById('loopToggle');
    loopBtn.addEventListener('click', () => {
      player.loop = !player.loop;
      loopBtn.classList.toggle('active', player.loop);
    });

    /* -------- Track catalogue -------- */
    const tracks = [
      { title: 'Math Focus Beats',  subject: 'Maths',   url: 'focus-beats.mp3' },
      { title: 'English Lock‚ÄëIn',   subject: 'English', url: 'SUPER FOCUS [ Flow State Music ] Binaural Beats 40Hz ‚òÖ Ambient Study Music to Concentrate (mp3cut.net).mp3' }
      // add more tracks as needed
    ];

    /* -------- Render helpers -------- */
    function render() {
      buildFilters();
      showSubject();
    }

    function buildFilters() {
      const filtersEl = document.getElementById('filters');
      filtersEl.innerHTML = '';
      const allBtn = makeFilterBtn('All', () => showSubject());
      allBtn.classList.add('active');
      filtersEl.appendChild(allBtn);
      [...new Set(tracks.map(t => t.subject))].forEach(sub => {
        filtersEl.appendChild(makeFilterBtn(sub, () => showSubject(sub)));
      });
    }

    function makeFilterBtn(text, onClick) {
      const btn = document.createElement('button');
      btn.textContent = text;
      btn.className = 'filter-btn';
      btn.onclick = () => {
        document.querySelectorAll('#filters .filter-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        onClick();
      };
      return btn;
    }

    function showSubject(filter) {
      const container = document.getElementById('tracks');
      container.innerHTML = '';
      tracks.filter(t=>!filter||t.subject===filter).forEach(track=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3 class="card-title">${track.title}</h3>
          <p class="card-sub">${track.subject}</p>
          <button class="play-btn">Play</button>
        `;
        card.querySelector('button').addEventListener('click', ()=>{
          player.src = track.url;
          player.play();
        });
        container.appendChild(card);
      });
    }

    render();
  </script>
</body>
</html>
