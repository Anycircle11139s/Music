<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study Music Library (Google Drive)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' };</script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex flex-col text-gray-900 dark:text-gray-100">
  <header class="bg-indigo-600 dark:bg-indigo-700 text-white shadow p-4">
    <div class="container mx-auto flex items-center gap-4">
      <h1 class="text-2xl font-semibold">Study Music Library</h1>
      <button id="darkToggle" class="ml-auto p-2 rounded-lg border border-white/30 hover:bg-white/10" title="Toggle dark mode">ðŸŒ™</button>
    </div>
  </header>

  <main class="flex-1 container mx-auto p-4">
    <div id="filters" class="flex flex-wrap gap-2 mb-4"></div>
    <div id="tracks" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <footer class="bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-inner p-4 sticky bottom-0">
    <div class="container mx-auto flex items-center gap-4">
      <audio id="player" controls class="flex-1 w-full"></audio>
      <label class="text-sm flex items-center gap-1">
        Speed
        <select id="speedSelect" class="border rounded-md p-1 bg-white dark:bg-gray-700 dark:border-gray-600 text-sm">
          <option value="0.75">0.75Ã—</option>
          <option value="1" selected>1Ã—</option>
          <option value="1.25">1.25Ã—</option>
          <option value="1.5">1.5Ã—</option>
        </select>
      </label>
    </div>
  </footer>

<script>
  // Dark mode toggle
  const darkToggle = document.getElementById('darkToggle');
  darkToggle.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');
    localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
  });
  if (localStorage.theme === 'dark') document.documentElement.classList.add('dark');

  const player = document.getElementById('player');
  document.getElementById('speedSelect').addEventListener('change', e => {
    player.playbackRate = parseFloat(e.target.value);
  });

  // Google Drive hosted tracks - replace FILE_ID_1, FILE_ID_2 with your actual Google Drive file IDs
  const tracks = [
    {
      title: "Focus Beats",
      subject: "Maths",
      url: "https://drive.google.com/uc?export=download&id=1hptZCguWJIesi-5L0aTt32UrvNrb7D1P" // Replace FILE_ID_1 with your file ID
    },
    {
      title: "Reading Chill",
      subject: "Languages",
      url: "https://drive.google.com/uc?export=download&id=FILE_ID_2" // Replace FILE_ID_2 with your file ID
    }
    // Add more tracks here as needed
  ];

  function render() {
    const filtersEl = document.getElementById('filters');
    const tracksEl = document.getElementById('tracks');
    filtersEl.innerHTML = '';
    tracksEl.innerHTML = '';

    const subjects = [...new Set(tracks.map(t => t.subject))];
    subjects.forEach(sub => {
      const btn = document.createElement('button');
      btn.textContent = sub;
      btn.className = 'px-3 py-1 rounded-full border border-indigo-600 dark:border-indigo-400 text-indigo-600 dark:text-indigo-300 hover:bg-indigo-600 hover:text-white text-sm';
      btn.addEventListener('click', () => showSubject(sub));
      filtersEl.appendChild(btn);
    });

    showSubject();
  }

  function showSubject(filter) {
    const tracksEl = document.getElementById('tracks');
    tracksEl.innerHTML = '';

    tracks.filter(t => !filter || t.subject === filter).forEach(track => {
      const card = document.createElement('div');
      card.className = 'bg-white dark:bg-gray-700 rounded-xl shadow p-4 flex flex-col';
      card.innerHTML = `
        <h3 class="font-semibold mb-1 truncate">${track.title}</h3>
        <p class="text-xs text-gray-500 dark:text-gray-300 mb-4">${track.subject}</p>
        <button class="mt-auto px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white w-full">Play</button>
      `;

      const playBtn = card.querySelector('button');
      playBtn.addEventListener('click', () => {
        player.src = track.url;
        player.play();
      });
      tracksEl.appendChild(card);
    });
  }

  render();
</script>
</body>
</html>

